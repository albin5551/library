<app-navbar-admin></app-navbar-admin>
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<!-- <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.2.1/angular-material.min.css"> -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"> -->
<div class="container col-md-12" style="margin-top: 60px; display: inline-flex;">
    <div class="col-md-2 mt-5">
        <button style="margin: 50px; padding: 10px" type="button" class="btn btn-warning" (click)="openPopup()">Filter
        </button>
        <div class="outer_div1 mb-2">
            <h2>Category</h2>
            <!-- <div  *ngFor="let cat of category"  >
            <input type="checkbox" name="{{cat.categoryName}}" (click)="cate(cat.categoryId)"  >
            <label for="{{cat.categoryName}}">{{cat.categoryName}}</label>
           </div> -->

            <div *ngFor="let item of category; let i = index">
                <input type="checkbox" [id]="item+i" [name]="item" [(ngModel)]="item.Checked"
                    (change)="getCheckboxValues($event,item.categoryId)">&nbsp;
                <label [for]="item+i"> {{item.categoryName}}</label>
            </div>
        </div>
        <div class="outer_div2">
            <h2>Author</h2>
            <!-- <div  *ngFor="let cat of author  let i=index"  >
            <input type="checkbox" name="{{cat}}" (click)="authors(cat)"  >
            <label for="{{cat}}">{{cat}}</label>
           </div> -->

            <div *ngFor="let item of author; let i = index">
                <input type="checkbox" [id]="item+i" [name]="item" [(ngModel)]="item.Checked"
                    (change)="getCheckbox2Values($event,item)">&nbsp;
                <label [for]="item+i"> {{item}}</label>
            </div>
        </div>
    </div>

    <div class="col-md-10 list_div">
        <div style="display: inline-flex;padding: 0px;" class="col-md-12">
            <form [formGroup]="search" style="display: inline-flex;padding: 0px;" class="col-md-4">
                <input type="text" class="form-control" formControlName="inp" placeholder="Search"
                    aria-label="Recipient's username" aria-describedby="basic-addon2" (ngModelChange)="ser()">
                <div class="input-group-append">
                    <button class="input-group-text button_" id="basic-addon2" (click)="ser()">search</button>
                </div>
            </form>
            <div class="col-md-8" style="display: flex;align-items: flex-end;justify-content: right;">
                <input type="file" id="myFile" (change)="selectFile($event)">
                <button class=" btn-success btn-sm" style="margin-right: 15px; height: 35px;width: 100px;border: none;"
                    [disabled]="!selectedFiles" (click)="upload()">
                    Upload file
                </button>
            </div>
        </div>

        <div class="mt-2 col-md-12" style="padding: 0px;">
            <div class="outer_div" *ngFor="let data of result | paginate 
            : {
                itemsPerPage: tableSize,
                currentPage: page,
                totalItems: count
              }; ">
                <div style="display: inline-flex;padding: 0px 10px 0px 0px;" class="col-md-12">
                    <div class="col-md-10">
                        <img src="../../../assets/item_pics/{{data.image}}"
                            style="width: 150px;height: 130px;margin-bottom: 5px;">
                        <label for="" style="font-size: 12px;">Name : {{data.bookName}}</label>
                        <label for="" style="font-size: 12px;">Author : {{data.bookAuthor}}</label><br>
                        <label for="" style="font-size: 12px;">cat : {{data.category.categoryName}}</label>
                        <!-- <label for="" style="font-size: 12px;">Stock : {{data.stock}}</label> -->

                    </div>
                    <div style="margin-top: 160px;" class="col-md-2 icon_div">
                        <span class="material-symbols-outlined" style="cursor: pointer;" (click)="del(data.bookId)">
                            delete </span>
                        <span class="material-symbols-outlined" style="cursor: pointer;"
                            [routerLink]="['/editbook',data.bookId]">edit</span>
                        <span class="material-symbols-outlined" style="cursor: pointer;"
                            [routerLink]="['/bookdview',data.bookId]">visibility</span>
                    </div>
                </div>

            </div>
            <div *ngFor="let data of result | paginate 
        : {
            itemsPerPage: tableSize,
            currentPage: page,
            totalItems: count
          };">
            </div>
        </div>

        <div class="d-flex justify-content-center">
            <pagination-controls (pageChange)="onTableDataChange(page=$event)">
            </pagination-controls>
        </div>
    </div>
</div>




<div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displayStyle}">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Filter</h4>
            </div>
            <div class="modal-body ">

                <div class="outer_div1_modal mb-2">
                    <h2>Category</h2>
                    <!-- <div  *ngFor="let cat of category"  >
            <input type="checkbox" name="{{cat.categoryName}}" (click)="cate(cat.categoryId)"  >
            <label for="{{cat.categoryName}}">{{cat.categoryName}}</label>
           </div> -->

                    <div *ngFor="let item of category; let i = index">
                        <input type="checkbox" [id]="item+i" [name]="item" [(ngModel)]="item.Checked"
                            (change)="getCheckboxValues($event,item.categoryId)">&nbsp;
                        <label [for]="item+i"> {{item.categoryName}}</label>
                    </div>
                </div>
                <div class="outer_div2_modal">
                    <h2>Author</h2>
                    <!-- <div  *ngFor="let cat of author  let i=index"  >
            <input type="checkbox" name="{{cat}}" (click)="authors(cat)"  >
            <label for="{{cat}}">{{cat}}</label>
           </div> -->

                    <div *ngFor="let item of author; let i = index">
                        <input type="checkbox" [id]="item+i" [name]="item" [(ngModel)]="item.Checked"
                            (change)="getCheckbox2Values($event,item)">&nbsp;
                        <label [for]="item+i"> {{item}}</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="closePopup()">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>